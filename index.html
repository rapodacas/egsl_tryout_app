<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Softball Tryout App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    margin: 0;
    padding: 0;
    background: #f2f2f7;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    overflow-x: hidden;
    /* font-size: 40px; */
  }
input, textarea, label, .player-name, .section-title { font-size: 3.0rem; }
  .hidden {
    display: none;
  }

  /* Start Screen */
  #teamSelectScreen {
    padding: 20px 16px;
  }

  #teamSelectScreen h1 {
    font-size: 1.4rem;
    margin-bottom: 12px;
  }

  .team-list {
    margin-top: 10px;
    margin-bottom: 16px;
  }

  .team-item {
    padding: 10px 12px;
    border-radius: 10px;
    background: #fff;
    margin-bottom: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .team-item span {
    font-size: 0.95rem;
    font-weight: 600;
  }

  .team-empty {
    font-size: 0.9rem;
    color: #777;
    font-style: italic;
  }

  .team-actions {
    margin-top: 10px;
  }

  .team-actions input {
    width: 100%;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 0.9rem;
    margin-bottom: 8px;
  }

  .team-actions button {
    width: 100%;
    padding: 8px;
    border-radius: 10px;
    border: none;
    background: #007aff;
    color: #fff;
    font-size: 0.9rem;
  }

  /* Top Bar */
  .top-bar {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 10px 12px;
    background: #fff;
    border-bottom: 1px solid #ddd;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .top-row {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .player-name {
    font-size: 3.0rem;
    font-weight: 700;
  }

  .player-controls {
    text-align:center;
  }
  .player-controls button {
    padding: 6px 6px;
    border-radius: 8px;
    border: none;
    background: #007aff;
    color: white;
    font-size: 1.7rem;
    margin-left: 4px;
  }

  /* Summary Bar */
  .summary-bar-container {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .summary-progress-outer {
    width: 100%;
    height: 8px;
    border-radius: 999px;
    background: #e0e0e0;
    overflow: hidden;
  }

  .summary-progress-inner {
    height: 100%;
    width: 0%;
    border-radius: 999px;
    background: #34c759;
    transition: width 0.2s ease-out;
  }

  .summary-text {
    font-size: 1rem;
    color: #555;
    display: flex;
    justify-content: space-between;
  }

  /* Card */
  .card {
    background: white;
    margin: 12px;
    padding: 16px;
    border-radius: 14px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .field {
    margin-bottom: 10px;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fafafa;
  }

  label {
    font-size: 1rem;
    font-weight: 600;
    display: block;
    margin-bottom: 4px;
  }

  input, textarea {
    width: 100%;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1.1rem;
    box-sizing: border-box;
    background: #fff;
  }

  textarea {
    min-height: 60px;
  }

  .section-title {
    margin-top: 16px;
    margin-bottom: 6px;
    font-size: 2rem;
    font-weight: 700;
    color: #444;
  }

  /* Profile Photo */
.profile-row {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
}

.profile-pic-wrapper {
  width: 145px;
  height: 145px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid #ccc;
  background: #eaeaea;
  flex-shrink: 0; /* prevents distortion */
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}

.profile-pic-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* keeps aspect ratio while filling the circle */
}

  #photoInput {
    display: none;
  }

  /* Throws/Bats pill buttons */
  .throws-group {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .throws-option {
    flex: 1;
    text-align: center;
    padding: 6px 4px;
    border-radius: 999px;
    border: 1px solid #ccc;
    font-size: 0.8rem;
    background: #fff;
    cursor: pointer;
    user-select: none;
  }

  .throws-option.selected {
    background: #007aff;
    color: #fff;
    border-color: #007aff;
  }

  /* Rating Grid */
  .rating-group-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
    margin-bottom: 12px;
  }

  .rating-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fafafa;
  }

  .rating-label {
    font-size: 1.3rem;
    margin-bottom: 6px;
    font-weight: 600;
    text-align: center;
  }

  .rating-circles {
    display: flex;
    gap: 6px;
    justify-content: center;
  }

  /* Rating circles reduced by 15% (22px) */
  .circle {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid #ccc;
    background: #ffffff;
    cursor: pointer;
    box-sizing: border-box;
  }

  /* Selected states, 4 levels, filled greens */
  .circle.selected[data-level="1"] { background: #d9fdd3; border-color: #b4e8a7; }
  .circle.selected[data-level="2"] { background: #b4f3a4; border-color: #88d874; }
  .circle.selected[data-level="3"] { background: #7cdd76; border-color: #4fb44c; }
  .circle.selected[data-level="4"] { background: #3a9c46; border-color: #287135; }

  /* Swipe Container */
  .swipe-container {
    width: 100%;
    touch-action: pan-y;
  }

  /* All Players View */
  #allPlayersView {
    display: none;
    padding: 12px;
  }

  .players-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }

  .players-table th,
  .players-table td {
    padding: 8px;
    border-bottom: 1px solid #ddd;
  }

  .players-table tr {
    cursor: pointer;
  }

  .players-table tr:hover {
    background: #f0f0f0;
  }
    /* Center all table content */ 
  .players-table th, .players-table td { 
    text-align: center; 
    }
  /* Alternating row colors */ 
  .players-table tbody tr:nth-child(odd) { background: #fafafa; } 
  .players-table tbody tr:nth-child(even) { background: #ffffff; }
  /* Sortable column cursor */ .players-table th { cursor: pointer; user-select: none; }
  /* Highlight sorted column */ .players-table th.sorted-asc::after { content: " ‚ñ≤"; font-size: 0.7rem; } 
  .players-table th.sorted-desc::after { content: " ‚ñº"; font-size: 0.7rem; }
/* Left-align only the Player column */
.players-table td:first-child, .players-table th:first-child {
     text-align: left; padding-left: 8px; 
     /* optional: adds breathing room */ 
}
</style>
</head>

<body>

<!-- TEAM SELECTION SCREEN -->
<div id="teamSelectScreen">
  <h1>Select or create a team</h1>
  <div id="teamList" class="team-list"></div>

  <div class="team-actions">
    <input type="text" id="newTeamName" placeholder="New team name (e.g., 12U A)">
    <button onclick="createTeam()">Create New Team</button>
  </div>
</div>

<!-- MAIN APP -->
<div id="mainApp" class="hidden">

  <!-- TOP BAR -->
  <div class="top-bar">
    <div class="top-row">
      <!-- <div class="player-name" id="playerNameDisplay">Player 1</div> -->
      <div class="player-controls">
        <!-- <button onclick="showTeamSelect()">Teams</button> -->
        <button onclick="toggleAllPlayers()">All Players</button>
        <button onclick="addPlayer()">+</button>
        <button onclick="deletePlayer()" style="font-size: 1.4rem;">üóë</button>
        <button onclick="exportCSV()">Export</button>
      </div>
    </div>

    <div class="summary-bar-container">
      <div class="summary-progress-outer">
        <div class="summary-progress-inner" id="summaryProgress"></div>
      </div>
      <div class="summary-text">
        <span id="summaryScore">Score: 0</span>
        <span id="summaryAvg">Avg: 0.0</span>
        <span id="summaryCompletion">0%</span>
      </div>
    </div>
    <div class="player-name" id="playerNameDisplay">Player 1</div>

  </div>

  <!-- ALL PLAYERS VIEW -->
  <div id="allPlayersView">
    <h2>All Players</h2>
    <table class="players-table" id="playersTable">
        <thead> 
            <tr> 
                <th>Name</th>
                <th>ü¶Øüí•</th>
                <th>ü•é</th>
                <th>üèÉ</th>
                <th>Avg</th>
                <th>%</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
  </div>

  <!-- PLAYER CARD -->
  <div class="swipe-container" id="swipeArea">
    <div class="card" id="playerCard">
      <!-- PROFILE + NAME + THROWS -->
      <div class="profile-row">
  
        <!-- Profile Photo -->
        <div class="profile-pic-wrapper" id="profilePicWrapper">
          <img id="profilePic" src="" alt="">
        </div>
        <input type="file" id="photoInput" accept="image/*" capture="environment">

        <!-- Name + Throws -->
        <div>
          <div class="field">
            <label>Name</label>
            <input type="text" data-field="name">
          </div>

          <div class="field">
            <label>Throws/Bats</label>
            <div class="throws-group" id="throwsGroup">
              <div class="throws-option" data-throws-value="R/R">R/R</div>
              <div class="throws-option" data-throws-value="R/L">R/L</div>
              <div class="throws-option" data-throws-value="L/R">L/R</div>
              <div class="throws-option" data-throws-value="L/L">L/L</div>
            </div>
          </div>
        </div>

      </div>

      <div class="section-title">Notes</div>
      <div class="field">
        <textarea data-field="notes" placeholder="Strengths, weaknesses, recommended positions..."></textarea>
      </div>

      <!-- RATINGS -->
      <div class="section-title">Hitting</div>
      <div class="rating-group-grid">
        <div class="rating-item">
          <div class="rating-label">Swing</div>
          <div class="rating-circles" data-field="swing">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Contact</div>
          <div class="rating-circles" data-field="contact">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Power</div>
          <div class="rating-circles" data-field="power">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>
      </div>

      <div class="section-title">Fielding</div>
      <div class="rating-group-grid">
        <div class="rating-item">
          <div class="rating-label">Glove</div>
          <div class="rating-circles" data-field="glove">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Arm</div>
          <div class="rating-circles" data-field="arm">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Footwork</div>
          <div class="rating-circles" data-field="footwork">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>
      </div>

      <div class="section-title">Speed & Intangibles</div>
      <div class="rating-group-grid">
        <div class="rating-item">
          <div class="rating-label">Speed</div>
          <div class="rating-circles" data-field="speed">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Hustle</div>
          <div class="rating-circles" data-field="hustle">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>

        <div class="rating-item">
          <div class="rating-label">Coachability</div>
          <div class="rating-circles" data-field="coachability">
            <div class="circle" data-level="1"></div>
            <div class="circle" data-level="2"></div>
            <div class="circle" data-level="3"></div>
            <div class="circle" data-level="4"></div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<script>
/* GLOBAL STATE */
let currentTeamKey = null;
let players = [];
let current = 0;
let sortState = { column: null, direction: 1 };

/* TEAM MANAGEMENT */

function getTeamKeys() {
  const keys = [];
  for (let i = 0; i < localStorage.length; i++) {
    const k = localStorage.key(i);
    if (k && k.startsWith("team_")) {
      keys.push(k);
    }
  }
  return keys.sort();
}

function renderTeamList() {
  const container = document.getElementById("teamList");
  container.innerHTML = "";

  const keys = getTeamKeys();
  if (keys.length === 0) {
    const empty = document.createElement("div");
    empty.className = "team-empty";
    empty.textContent = "No teams yet. Create one below.";
    container.appendChild(empty);
    return;
  }

  keys.forEach(key => {
    const teamName = key.replace("team_", "");
    const div = document.createElement("div");
    div.className = "team-item";
    const span = document.createElement("span");
    span.textContent = teamName;

    div.appendChild(span);
    div.addEventListener("click", () => {
      selectTeam(key);
    });

    container.appendChild(div);
  });
}

function createTeam() {
  const input = document.getElementById("newTeamName");
  const name = input.value.trim();
  if (!name) return;

  const key = "team_" + name;
  if (!localStorage.getItem(key)) {
    localStorage.setItem(key, JSON.stringify([{}]));
  }
  input.value = "";
  renderTeamList();
  seedTeam(name);
}

function selectTeam(key) {
  currentTeamKey = key;
  const data = localStorage.getItem(currentTeamKey);
  players = data ? JSON.parse(data) : [{}];
  if (!Array.isArray(players) || players.length === 0) {
    players = [{}];
  }
  current = 0;

  document.getElementById("teamSelectScreen").classList.add("hidden");
  document.getElementById("mainApp").classList.remove("hidden");

  loadPlayer();
}

function showTeamSelect() {
  document.getElementById("mainApp").classList.add("hidden");
  document.getElementById("teamSelectScreen").classList.remove("hidden");
  renderTeamList();
}

/* SAVE CURRENT TEAM */
function save() {
  if (!currentTeamKey) return;
  localStorage.setItem(currentTeamKey, JSON.stringify(players));
}

/* SUMMARY BAR */
function updateSummary() {
  const p = players[current] || {};
  const fields = [
    "swing","contact","power",
    "glove","arm","footwork",
    "speed","hustle","coachability"
  ];

  let sum = 0, count = 0;
  fields.forEach(f => {
    if (p[f] >= 1 && p[f] <= 4) {
      sum += p[f];
      count++;
    }
  });

  const avg = count ? sum / count : 0;
  const completion = fields.length ? (count / fields.length) * 100 : 0;

  document.getElementById("summaryScore").textContent = "Score: " + sum;
  document.getElementById("summaryAvg").textContent = "Avg: " + avg.toFixed(1);
  document.getElementById("summaryCompletion").textContent = Math.round(completion) + "%";
  document.getElementById("summaryProgress").style.width = completion + "%";
}

/* LOAD PLAYER */
function loadPlayer() {
  const p = players[current] || {};
  document.getElementById("playerNameDisplay").textContent = p.name || `Player ${current + 1}`;

  // Text inputs / textarea
  document.querySelectorAll("input[data-field], textarea[data-field]").forEach(el => {
    const field = el.getAttribute("data-field");
    el.value = p[field] || "";
  });

  // Rating circles
  document.querySelectorAll(".rating-circles").forEach(group => {
    const field = group.getAttribute("data-field");
    group.querySelectorAll(".circle").forEach(c => {
      c.classList.remove("selected");
      const level = parseInt(c.getAttribute("data-level"), 10);
      if (p[field] === level) {
        c.classList.add("selected");
      }
    });
  });

  // Throws/Bats pill buttons
  const throwsValue = p.throws || "";
  document.querySelectorAll(".throws-option").forEach(opt => {
    const val = opt.getAttribute("data-throws-value");
    if (val === throwsValue) opt.classList.add("selected");
    else opt.classList.remove("selected");
  });

  // Profile photo
  const profilePic = document.getElementById("profilePic");
  if (p.photo) {
    profilePic.src = p.photo;
  } else {
    profilePic.src = "";
  }

  updateSummary();
}

/* ADD PLAYER */
function addPlayer() {
  players.push({});
  current = players.length - 1;
  save();
  loadPlayer();
}

/* DELETE PLAYER */
function deletePlayer() {
  if (players.length === 1) return;
  players.splice(current, 1);
  current = Math.max(0, current - 1);
  save();
  loadPlayer();
}

/* INPUT HANDLERS (name, notes) */
document.addEventListener("input", e => {
  const el = e.target;
  if (!el.matches("input[data-field], textarea[data-field]")) return;

  const field = el.getAttribute("data-field");
  if (!players[current]) players[current] = {};
  players[current][field] = el.value;
  save();
  loadPlayer();
});

/* RATING HANDLERS */
document.addEventListener("click", e => {
  // Rating circles
  const circle = e.target.closest(".circle");
  if (circle) {
    const group = circle.closest(".rating-circles");
    if (group) {
      const field = group.getAttribute("data-field");
      const level = parseInt(circle.getAttribute("data-level"), 10);
      if (!players[current]) players[current] = {};
      players[current][field] = level;
      save();

      group.querySelectorAll(".circle").forEach(c => c.classList.remove("selected"));
      circle.classList.add("selected");
      updateSummary();
    }
  }

  // Throws/Bats pill buttons
  const throwsOption = e.target.closest(".throws-option");
  if (throwsOption) {
    const value = throwsOption.getAttribute("data-throws-value");
    if (!players[current]) players[current] = {};
    players[current].throws = value;
    save();

    document.querySelectorAll(".throws-option").forEach(opt => opt.classList.remove("selected"));
    throwsOption.classList.add("selected");
  }
});

/* SWIPE NAVIGATION */
let startX = 0;
const swipeArea = document.getElementById("swipeArea");

swipeArea.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

swipeArea.addEventListener("touchend", e => {
  const diff = e.changedTouches[0].clientX - startX;
  if (Math.abs(diff) < 50) return;
  if (diff < 0 && current < players.length - 1) current++;
  else if (diff > 0 && current > 0) current--;
  loadPlayer();
});

/* ALL PLAYERS VIEW */
function toggleAllPlayers() {
  const card = document.getElementById("playerCard");
  const list = document.getElementById("allPlayersView");

  if (list.style.display === "none" || list.style.display === "") {
    buildPlayersTable();
    list.style.display = "block";
    card.style.display = "none";
  } else {
    list.style.display = "none";
    card.style.display = "block";
  }
}

function buildPlayersTable() {
  const tbody = document.querySelector("#playersTable tbody");
  const thead = document.querySelector("#playersTable thead");
  tbody.innerHTML = "";

  const fields = [
    "swing","contact","power",
    "glove","arm","footwork",
    "speed","hustle","coachability"
  ];

  // Compute stats for each player
  const rows = players.map((p, index) => {
    // Category groups
    const hittingFields = ["swing", "contact", "power"];
    const fieldingFields = ["glove", "arm", "footwork"];
    const intangiblesFields = ["speed", "hustle", "coachability"];

    function avgOf(list) {
        let s = 0, c = 0;
        list.forEach(f => {
        if (p[f] >= 1 && p[f] <= 4) {
            s += p[f];
            c++;
        }
        });
        return c ? s / c : 0;
    }

    const hitting = avgOf(hittingFields);
    const fielding = avgOf(fieldingFields);
    const intangibles = avgOf(intangiblesFields);

    // Overall
    const allFields = [...hittingFields, ...fieldingFields, ...intangiblesFields];
    let sum = 0, count = 0;
    allFields.forEach(f => {
        if (p[f] >= 1 && p[f] <= 4) {
        sum += p[f];
        count++;
        }
    });

    return {
        index,
        name: p.name || `Player ${index + 1}`,
        hitting,
        fielding,
        intangibles,
        avg: count ? sum / count : 0,
        completion: allFields.length ? (count / allFields.length) * 100 : 0
    };
  });

  // Apply sorting
  if (sortState.column) {
    rows.sort((a, b) => {
      const col = sortState.column;
      const dir = sortState.direction;

      if (typeof a[col] === "string") {
        return a[col].localeCompare(b[col]) * dir;
      }
      return (a[col] - b[col]) * dir;
    });
  }

  // Render rows
  rows.forEach(r => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${r.name}</td>
        <td>${r.hitting.toFixed(1)}</td>
        <td>${r.fielding.toFixed(1)}</td>
        <td>${r.intangibles.toFixed(1)}</td>
        <td>${r.avg.toFixed(1)}</td>
        <td>${Math.round(r.completion)}</td>
    `;

    tr.addEventListener("click", () => {
      current = r.index;
      document.getElementById("allPlayersView").style.display = "none";
      document.getElementById("playerCard").style.display = "block";
      loadPlayer();
    });

    tbody.appendChild(tr);
  });

  // Make headers sortable
  const headers = thead.querySelectorAll("th");
  headers.forEach((th, i) => {
    const colMap = [
        "name",
        "hitting",
        "fielding",
        "intangibles",
        "avg",
        "completion"
    ];

    const col = colMap[i];

    th.onclick = () => {
      // Toggle direction if clicking same column
      if (sortState.column === col) {
        sortState.direction *= -1;
      } else {
        sortState.column = col;
        sortState.direction = 1;
      }

      // Clear previous sort indicators
      headers.forEach(h => h.classList.remove("sorted-asc", "sorted-desc"));

      // Add new indicator
      th.classList.add(sortState.direction === 1 ? "sorted-asc" : "sorted-desc");

      buildPlayersTable();
    };
  });
}

/* CSV EXPORT */
function exportCSV() {
  if (!players || players.length === 0) return;

  const fields = [
    "name","throws",
    "swing","contact","power",
    "glove","arm","footwork",
    "speed","hustle","coachability",
    "notes"
  ];

  const header = fields.join(",");
  const rows = players.map(p => {
    const player = p || {};
    return fields.map(field => {
      let value = player[field];
      if (value === undefined || value === null) value = "";
      value = String(value).replace(/"/g, '""');
      if (value.includes(",") || value.includes("\n") || value.includes("\"")) {
        value = `"${value}"`;
      }
      return value;
    }).join(",");
  });

  const csv = [header, ...rows].join("\n");
  const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  const teamName = currentTeamKey ? currentTeamKey.replace("team_", "") : "team";
  a.download = teamName + "_players.csv";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

/* PROFILE PHOTO HANDLING */
document.getElementById("profilePicWrapper").addEventListener("click", () => {
  document.getElementById("photoInput").click();
});

document.getElementById("photoInput").addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function (event) {
    const img = new Image();
    img.onload = function () {
      const canvas = document.createElement("canvas");
      const maxSize = 300; // compress to ~300px
      let width = img.width;
      let height = img.height;

      if (width > height) {
        if (width > maxSize) {
          height *= maxSize / width;
          width = maxSize;
        }
      } else {
        if (height > maxSize) {
          width *= maxSize / height;
          height = maxSize;
        }
      }

      canvas.width = width;
      canvas.height = height;

      const ctx = canvas.getContext("2d");
      ctx.drawImage(img, 0, 0, width, height);

      const compressedData = canvas.toDataURL("image/jpeg", 0.7);

      players[current].photo = compressedData;
      save();
      loadPlayer();
    };
    img.src = event.target.result;
  };
  reader.readAsDataURL(file);
});

/* INITIALIZE */
renderTeamList();
function seedTeam(teamName) {
  const names = [
    "ILeiana Aguilar",
    "Jana Almasri",
    "Juliet Apodaca",
    "Alannah Arguello",
    "Shealey Belardes",
    "Alexis Berggren",
    "Katelyn Borecky",
    "Cambria Brosnan",
    "Angela Calixto",
    "Natalie Cervantes",
    "Penelope Cuevas",
    "Avery Dean",
    "Alyson Eden",
    "Adeline Esquivel",
    "Lily Esquivel",
    "Aryanna Fernandez",
    "Harper Flores",
    "Kaylee Flores",
    "Haley Franco",
    "Evelyn Gardino",
    "Maddison Garcia",
    "Cora Gottlieb",
    "Tavyn Green",
    "Jaedyn Kandyce Grill",
    "Leilani Hernandez",
    "Kara Hutchinson",
    "Lilyana Jordan",
    "Aria Lopez",
    "Bella Lopez",
    "Bianca Lopez",
    "Noelle Marquez",
    "Caroline McDonald",
    "Mila Medina",
    "Samantha Mendoza",
    "Dryden Miyajima",
    "Kennedy Moralez",
    "Madison Murphy",
    "Hannah Nack",
    "Leiyanah Paipa",
    "Victoria Parker",
    "Khloe Pettit",
    "Katalina Ponce",
    "Cierra Prieto",
    "Madison Pulver",
    "Aiyana Renteria",
    "Kaylee Rhodes",
    "Alysse Robles",
    "Daliah Sanchez",
    "Savannah Springsteen",
    "Riley Tanner",
    "Evelyn Tellez",
    "Isabel Torres",
    "Noshla Turner",
    "Uushla Turner",
    "Ariyana Ari Tyler",
    "Olivia Vallejos",
    "Stella Vega",
    "Amelia Webber",
    "Gloria Wiebel"
  ];

  const roster = names.map(n => ({ name: n }));

  const key = "team_" + teamName;
  localStorage.setItem(key, JSON.stringify(roster));

  alert("Team seeded: " + teamName);
}

</script>

</body>
